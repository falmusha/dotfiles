#!/bin/bash

SYMLINKS="vimrc zshrc oh-my-zsh vim"
DOTFILES_DIR=$(dirname $0)
BACKUP_SUFFIX="orig"

for SYMLINK in $SYMLINKS; do

  if [ -e "$HOME/.$SYMLINK" ]; then

    i="0"
    while [ -e "$HOME/$SYMLINK.$BACKUP_SUFFIX" ] 
    do
      i=$[$i+1]
      BACKUP_SUFFIX="orig$i"
    done

    echo "Oh ... You have $SYMLINK, I'll back it up for you!!"
    echo -e "Copying symlink $HOME/.$SYMLINK -> $HOME/$SYMLINK.$BACKUP_SUFFIX\n"

    if [ -d $HOME/.$SYMLINK ]; then
      cp -r $HOME/.$SYMLINK $HOME/$SYMLINK.$BACKUP_SUFFIX
    else
      cp $HOME/.$SYMLINK $HOME/$SYMLINK.$BACKUP_SUFFIX
    fi

  else

    echo "Creating symlinks $HOME/.$SYMLINK -> $DOTFILES_DIR/$SYMLINK"
    ln -s $DOTFILES_DIR/$SYMLINK $HOME/.$SYMLINK

  fi

done

# make zsh your default shell
chsh -s /bin/zsh

# copy vundle
if [ ! -e "$HOME/.vim/bundle/vundle" ]; then
  git clone https://github.com/gmarik/vundle.git $HOME/.vim/bundle/vundle
fi

# install vim plugins
vim +BundleInstall +qal

#run zsh
zsh
